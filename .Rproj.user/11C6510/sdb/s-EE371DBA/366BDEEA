{
    "collab_server" : "",
    "contents" : "library(shiny)\n\n##### Intitial exchange Prices #####\nkraken_price_raw <- system(\"cd Python/Kraken; python3 -c 'from kraken import get_kraken_price; get_kraken_price()'\", intern = TRUE)\nbitcoin_price <- reactiveValues(kraken_usd = strsplit(kraken_price_raw, \",\")[[1]][1], \n                                kraken_eur = strsplit(kraken_price_raw, \",\")[[1]][2])\nbitstamp_price_raw <- system(\"cd Python/Kraken; python3 -c 'from kraken import get_bitstamp_price; get_bitstamp_price()'\", intern = TRUE)\nbitcoin_price$bitstamp_usd <- strsplit(bitstamp_price_raw, \",\")[[1]][1]\nbitcoin_price$bitstamp_eur <- strsplit(bitstamp_price_raw, \",\")[[1]][2]\n\ngdax_price_raw <- system(\"cd Python/Kraken; python3 -c 'from kraken import get_gdax_price; get_gdax_price()'\", intern = TRUE)\nbitcoin_price$gdax_usd <- strsplit(gdax_price_raw, \",\")[[1]][1]\nbitcoin_price$gdax_eur <- strsplit(gdax_price_raw, \",\")[[1]][2]\n\n###### SERVER ######\nserver <- function(input, output) {\n  \n  # Price update timers in milliseconds\n  kraken_timer <- reactiveTimer(10000)\n  bitstamp_timer <- reactiveTimer(10000)\n  gdax_timer <- reactiveTimer(10000)\n  \n  # Kraken prices update\n  observeEvent(kraken_timer(),{\n    kraken_price_raw <- system(\"cd Python/Kraken; python3 -c 'from kraken import get_kraken_price; get_kraken_price()'\", intern = TRUE)\n    bitcoin_price$kraken_usd <- strsplit(kraken_price_raw, \",\")[[1]][1]\n    bitcoin_price$kraken_eur <- strsplit(kraken_price_raw, \",\")[[1]][2]\n  })\n  \n  # Bitstamp prices update\n  observeEvent(bitstamp_timer(),{    \n    bitstamp_price_raw <- system(\"cd Python/Kraken; python3 -c 'from kraken import get_bitstamp_price; get_bitstamp_price()'\", intern = TRUE)\n    bitcoin_price$bitstamp_usd <- strsplit(bitstamp_price_raw, \",\")[[1]][1]\n    bitcoin_price$bitstamp_eur <- strsplit(bitstamp_price_raw, \",\")[[1]][2]\n  })\n  \n  # GDAX prices update\n  observeEvent(gdax_timer(),{    \n    gdax_price_raw <- system(\"cd Python/Kraken; python3 -c 'from kraken import get_gdax_price; get_gdax_price()'\", intern = TRUE)\n    bitcoin_price$gdax_usd <- strsplit(gdax_price_raw, \",\")[[1]][1]\n    bitcoin_price$gdax_eur <- strsplit(gdax_price_raw, \",\")[[1]][2]\n  })\n  \n  # Outputs price to UI\n  observeEvent(input$go,{\n    currency_price <- paste0(tolower(input$exchange),\"_\",tolower(input$currency))\n    output$text <- renderText(bitcoin_price[[currency_price]])\n  })\n}\n###### SERVER END ######\n\n###### UI ######\nui <- fluidPage(\n  \n  #### Application title ####\n  titlePanel(\"Bit Tracker\"),\n  \n  sidebarLayout(\n    sidebarPanel(\n      selectInput(\"exchange\",\n                  \"Exchange\",\n                  choices = c(\"Bitstamp\", \"GDAX\", \"Kraken\")),\n      selectInput(\"currency\",\n                  \"Currency\",\n                  choices = c(\"USD\", \"EUR\")),\n      actionButton(\"go\", \"GO\")\n    ),\n    \n    #### Main Panel ####\n    mainPanel(\n      textOutput(\"text\")\n    )\n  )\n)\n###### UI END ######\n\nshinyApp(ui = ui, server = server)\n#runApp(host = \"0.0.0.0\", port = 5050)\n",
    "created" : 1501511278044.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "632748140",
    "id" : "366BDEEA",
    "lastKnownWriteTime" : 1501609289,
    "last_content_update" : 1501609289474,
    "path" : "~/Desktop/R/Bit Tracker/app.R",
    "project_path" : "app.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}